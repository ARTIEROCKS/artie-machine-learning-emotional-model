schema: '2.0'
stages:
  download:
    cmd: python src/download.py params.yaml
    outs:
    - path: data/CK+
      md5: e1c8b38aa6b547b44be89d1ae6bdd233.dir
      size: 1666260883
      nfiles: 10731
    - path: data/FER2013
      md5: 8951f54b0c9f75c74db0a1ce61c78bc5.dir
      size: 56516337
      nfiles: 35888
  download_videos:
    cmd: python src/download_videos_from_db.py params.yaml
    outs:
    - path: data/artie_videos
      md5: 285757fa3295e690d0a3fd2730e4a055.dir
      size: 166163587
      nfiles: 413
  data_augmentation:
    cmd: python src/bilstm_data_augmentation.py params.yaml
    deps:
    - path: data/CK+
      md5: e1c8b38aa6b547b44be89d1ae6bdd233.dir
      size: 1666260883
      nfiles: 10731
    - path: data/FER2013
      md5: 8951f54b0c9f75c74db0a1ce61c78bc5.dir
      size: 56516337
      nfiles: 35888
    outs:
    - path: data/CK_Augmented/emotions.csv
      md5: 313e2c18a0d99f23f1d1c06bd2163adc
      size: 175300
  normalization:
    cmd: python src/normalization.py params.yaml
    deps:
    - path: data/CK_Augmented/emotions.csv
      md5: 313e2c18a0d99f23f1d1c06bd2163adc
      size: 175300
    outs:
    - path: data/CK_Augmented/normalization
      md5: 2ccb78ab3e0eb8fcd8195fc8fd1f2576.dir
      size: 3742276
      nfiles: 2616
  training:
    cmd: python src/training.py params.yaml
    deps:
    - path: data/CK_Augmented/normalization
      md5: 2ccb78ab3e0eb8fcd8195fc8fd1f2576.dir
      size: 3742276
      nfiles: 2616
    params:
      params.yaml:
        training.batch_size: 64
        training.epochs: 30
        training.train_percentage: 0.8
    outs:
    - path: model/fer.h5
      md5: f23c2d7839952d9971a04ec6ff183d2a
      size: 7700960
    - path: model/fer.json
      md5: dc94f95504f88010b552f142ec53c9d1
      size: 9087
